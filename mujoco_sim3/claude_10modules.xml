<mujoco model="10modules_magnetic">
  <compiler angle="radian" meshdir="2modules/meshes"/>

  <option timestep="0.001"
          solver="Newton"
          iterations="100"
          tolerance="1e-8"/>

  <asset>
    <mesh name="base_piece" file="base_piece.STL"/>
    <mesh name="arm1_mesh" file="arm1.STL"/>
    <mesh name="piece1_mesh" file="piece1.STL"/>
    <mesh name="piece2_mesh" file="piece2.STL"/>
    <mesh name="arm2_mesh" file="arm2.STL"/>
    <mesh name="piece3_mesh" file="piece3.STL"/>
    <mesh name="piece4_mesh" file="piece2.STL"/>
    <mesh name="arm3_mesh" file="arm2.STL"/>
    <mesh name="piece5_mesh" file="piece3.STL"/>
    <mesh name="piece6_mesh" file="piece2.STL"/>
    <mesh name="arm4_mesh" file="arm2.STL"/>
    <mesh name="piece7_mesh" file="piece3.STL"/>
    <mesh name="piece8_mesh" file="piece2.STL"/>
    <mesh name="arm5_mesh" file="arm2.STL"/>
    <mesh name="piece9_mesh" file="piece3.STL"/>
    <mesh name="piece10_mesh" file="piece2.STL"/>
    <mesh name="arm6_mesh" file="arm2.STL"/>
    <mesh name="piece11_mesh" file="piece3.STL"/>
    <mesh name="piece12_mesh" file="piece2.STL"/>
    <mesh name="arm7_mesh" file="arm2.STL"/>
    <mesh name="piece13_mesh" file="piece3.STL"/>
    <mesh name="piece14_mesh" file="piece2.STL"/>
    <mesh name="arm8_mesh" file="arm2.STL"/>
    <mesh name="piece15_mesh" file="piece3.STL"/>
    <mesh name="piece16_mesh" file="piece2.STL"/>
    <mesh name="arm9_mesh" file="arm2.STL"/>
    <mesh name="piece17_mesh" file="piece3.STL"/>
    <mesh name="piece18_mesh" file="piece2.STL"/>
    <mesh name="arm10_mesh" file="arm2.STL"/>
    <mesh name="piece19_mesh" file="piece3.STL"/>

    <texture name="grid" type="2d" builtin="checker"
             width="512" height="512"
             rgb1="0.9 0.9 0.9" rgb2="0.6 0.6 0.6"/>
    <material name="grid_mat" texture="grid" texrepeat="100 100" reflectance="0.2"/>
    <material name="gray" rgba="0.26275 0.25098 0.23922 0.5"/>
    <material name="magnet_color" rgba="1 0 0 1" emission="1"/>
  </asset>

  <worldbody>
    <geom name="ground" type="plane" pos="0 0 0" size="20 20 0.1"
          material="grid_mat" contype="1" conaffinity="1"
          friction="1.0 0.1 0.005"/>

    <!-- ======== Module 1 ======== -->
    <body name="piece0" pos="0.000000 0.000000 1.166187" quat="1.000000 0.000000 0.000000 0.000000">
      <freejoint name="free_module1"/>
      <inertial pos="0.0010345 0.005326 0.010966" mass="0.185"
                fullinertia="4.7155E-05 4.6452E-05 8.9367E-05 1.4654E-07 -5.4158E-08 4.434E-08"/>
      <geom name="piece0_geom" type="mesh" mesh="base_piece" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_1" pos="0 -0.0676025 0.011">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_2" pos="-0.0585455 0.0338013 0.011">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_3" pos="0.0585455 0.0338013 0.011">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module1_start" pos="0 0 0.011" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm1" pos="0 0.033775 0.011" euler="1.5708 1.5712 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm1_geom" type="mesh" mesh="arm1_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint1" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece1" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012664" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.442E-08 -3.1795E-07 -2.9297E-09"/>
          <geom name="piece1_geom" type="mesh" mesh="piece1_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint2" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_4" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_5" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_6" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module1_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 2 ======== -->
    <body name="piece2" pos="-0.000033 -0.011978 1.096979" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module2"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece2_geom" type="mesh" mesh="piece2_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_7" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_8" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_9" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module2_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm2" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm2_geom" type="mesh" mesh="arm2_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint3" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece3" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece3_geom" type="mesh" mesh="piece3_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint4" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_10" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_11" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_12" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module2_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 3 ======== -->
    <body name="piece4" pos="-0.000086 -0.087025 0.966106" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module3"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece4_geom" type="mesh" mesh="piece4_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_13" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_14" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_15" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module3_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm3" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm3_geom" type="mesh" mesh="arm3_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint5" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece5" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece5_geom" type="mesh" mesh="piece5_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint6" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_16" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_17" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_18" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module3_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 4 ======== -->
    <body name="piece6" pos="-0.000139 -0.162072 0.835234" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module4"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece6_geom" type="mesh" mesh="piece6_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_19" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_20" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_21" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module4_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm4" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm4_geom" type="mesh" mesh="arm4_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint7" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece7" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece7_geom" type="mesh" mesh="piece7_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint8" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_22" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_23" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_24" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module4_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 5 ======== -->
    <body name="piece8" pos="-0.000192 -0.237118 0.704362" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module5"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece8_geom" type="mesh" mesh="piece8_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_25" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_26" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_27" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module5_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm5" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm5_geom" type="mesh" mesh="arm5_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint9" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece9" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece9_geom" type="mesh" mesh="piece9_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint10" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_28" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_29" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_30" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module5_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 6 ======== -->
    <body name="piece10" pos="-0.000245 -0.312165 0.573489" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module6"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece10_geom" type="mesh" mesh="piece10_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_31" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_32" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_33" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module6_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm6" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm6_geom" type="mesh" mesh="arm6_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint11" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece11" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece11_geom" type="mesh" mesh="piece11_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint12" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_34" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_35" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_36" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module6_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 7 ======== -->
    <body name="piece12" pos="-0.000298 -0.387212 0.442617" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module7"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece12_geom" type="mesh" mesh="piece12_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_37" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_38" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_39" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module7_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm7" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm7_geom" type="mesh" mesh="arm7_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint13" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece13" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece13_geom" type="mesh" mesh="piece13_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint14" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_40" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_41" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_42" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module7_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 8 ======== -->
    <body name="piece14" pos="-0.000351 -0.462258 0.311745" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module8"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece14_geom" type="mesh" mesh="piece14_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_43" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_44" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_45" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module8_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm8" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm8_geom" type="mesh" mesh="arm8_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint15" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece15" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece15_geom" type="mesh" mesh="piece15_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint16" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_46" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_47" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_48" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module8_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 9 ======== -->
    <body name="piece16" pos="-0.000404 -0.537305 0.180872" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module9"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece16_geom" type="mesh" mesh="piece16_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_49" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_50" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_51" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module9_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm9" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm9_geom" type="mesh" mesh="arm9_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint17" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece17" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece17_geom" type="mesh" mesh="piece17_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint18" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_52" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_53" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_54" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <site name="module9_end" pos="0.06020 0.00000 0.04575" size="0.003" rgba="1 0 0 0.5"/>
        </body>
      </body>
    </body>

    <!-- ======== Module 10 ======== -->
    <body name="piece18" pos="-0.000457 -0.612352 0.050000" quat="-0.683011 -0.182738 -0.183013 0.683088">
      <freejoint name="free_module10"/>
      <inertial pos="0.03736 -3.3609E-05 -0.0040952" mass="0.185"
                fullinertia="4.7106E-05 8.9367E-05 4.6501E-05 -2.4733E-08 2.3093E-07 -6.5479E-08"/>
      <geom name="piece18_geom" type="mesh" mesh="piece18_mesh" material="gray" contype="1" conaffinity="1"/>

      <body name="ball_55" pos="0 0 -0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_56" pos="0 0 0.058548">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <body name="ball_57" pos="0.1014332 0 0">
        <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
      </body>
      <site name="module10_start" pos="0 0 0" size="0.003" rgba="0 1 0 0.5"/>

      <body name="arm10" pos="0.050689 0 -0.02925" euler="0 1.0476 0">
        <inertial pos="0.0087368 9.3905E-07 -0.0054744" mass="0.004"
                fullinertia="1.8096E-08 1.3363E-07 1.4184E-07 -1.7121E-12 4.7185E-09 2.3371E-12"/>
        <geom name="arm10_geom" type="mesh" mesh="arm10_mesh" material="gray" contype="1" conaffinity="1"/>
        <joint name="joint19" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

        <body name="piece19" pos="0.020005 0 0">
          <inertial pos="0.03453 -0.00020927 -0.00012663" mass="0.1075"
                fullinertia="4.5118E-05 8.4255E-05 4.26E-05 -2.4421E-08 -3.1795E-07 -2.932E-09"/>
          <geom name="piece19_geom" type="mesh" mesh="piece19_mesh" material="gray" contype="1" conaffinity="1"/>
          <joint name="joint20" type="hinge" axis="0 0 -1" range="-1.57 1.57"/>

          <body name="ball_58" pos="0.1014332 0 0">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_59" pos="0 0 -0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
          <body name="ball_60" pos="0 0 0.058548">
            <geom type="sphere" size="0.006" mass="0.00001" material="magnet_color" contype="0" conaffinity="0"/>
          </body>
        </body>
      </body>
    </body>

  </worldbody>

  <equality>
    <!-- Active joint coupling (within each module) -->
    <joint name="active_1" joint1="joint1" joint2="joint2" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_2" joint1="joint3" joint2="joint4" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_3" joint1="joint5" joint2="joint6" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_4" joint1="joint7" joint2="joint8" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_5" joint1="joint9" joint2="joint10" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_6" joint1="joint11" joint2="joint12" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_7" joint1="joint13" joint2="joint14" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_8" joint1="joint15" joint2="joint16" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_9" joint1="joint17" joint2="joint18" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>
    <joint name="active_10" joint1="joint19" joint2="joint20" polycoef="0 1 0 0 0" solref="0.01 0.5" solimp="0.99 0.999 0.0001"/>

    <!-- Magnetic connections between modules (can be toggled with eq_active) -->
    <weld name="magnet_1_2" body1="piece1" body2="piece2" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_2_3" body1="piece3" body2="piece4" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_3_4" body1="piece5" body2="piece6" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_4_5" body1="piece7" body2="piece8" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_5_6" body1="piece9" body2="piece10" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_6_7" body1="piece11" body2="piece12" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_7_8" body1="piece13" body2="piece14" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_8_9" body1="piece15" body2="piece16" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
    <weld name="magnet_9_10" body1="piece17" body2="piece18" relpose="0.060203 0.000000 0.045753 0.865925 0.000000 -0.500174 -0.000000" solref="0.005 1.0" solimp="0.95 0.99 0.001"/>
  </equality>

  <actuator>
    <position name="motor_1" joint="joint1" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_2" joint="joint3" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_3" joint="joint5" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_4" joint="joint7" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_5" joint="joint9" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_6" joint="joint11" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_7" joint="joint13" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_8" joint="joint15" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_9" joint="joint17" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
    <position name="motor_10" joint="joint19" gear="1" forcerange="-2.16 2.16" ctrlrange="-1.57 1.57"/>
  </actuator>

</mujoco>